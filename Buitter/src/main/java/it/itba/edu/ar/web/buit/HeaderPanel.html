<html>
	<body>
		<wicket:panel>
			<div class="well well-lg text-center" style="margin-bottom: 0px">
				<c:if test="${not empty user_info.photo}">
					<img class="profile-pic" src="../../image?name=<c:out value="${user_info.username}"/>"/>
				</c:if>
				<c:if test="${empty user_info.photo}">
					<img class="profile-pic" src="../../../img/nopicture.png"/>
				</c:if>
				<h2 class="profile-name"><span wicket:id="name">Juan Martin</span> <span wicket:id="surname">Buireo</span></h2>
				<h4 class="profile-user">@<span wicket:id="username">jbuireo</span></h4>
				<p class="profile-desc text-muted" style="word-wrap:break-word">"<span wicket:id="description">Fiel seguidor de Buitter</span>"</p>
			</div> <!-- .well .well-lg .text-center -->
			<div class="bs-example table-responsive">
				<table class="table table-striped table-bordered table-hover">
					<thead>
						<tr>
							<th><a href="../../buit/profile/${user_info.username}"><small><p style="margin-bottom: 0px;color: #000000;">${fn:length(user_info.mybuits)}</p></small><small><p style="margin-bottom: 0px;color: #999;">BUITS</p></small></a></th>
							<th><a href="../../buit/following/${user_info.username}"><small><p style="margin-bottom: 0px;color: #000000;";>${fn:length(user_info.following)}</p></small><small><p style="margin-bottom: 0px;color: #999;">FOLLOWING</p></small></a></th>
							<th><a href="../../buit/followers/${user_info.username}"><small><p style="margin-bottom: 0px;color: #000000;">${fn:length(user_info.followers)}</p></small><small><p style="margin-bottom: 0px;color: #999;">FOLLOWERS</p></small></a></th>
							<th><small><p style="margin-bottom: 0px;color: #000000;"><!-- <c:out value="${user_info.visits}"/> --></p></small><small><p style="margin-bottom: 0px; color: #999;">VISITORS</p></small></th>
							<c:if test="${not empty user}">
								<c:if test="${user != user_info.username}">
									<c:set var="found" value='false'/>
									<c:forEach items="${user_info.followers}" var="follower">
										<c:if test="${follower.username == user}"><c:set var="found" value='true'/></c:if>
									</c:forEach>
									<c:if test="${found == 'true'}"><c:set var="method" value='Unfollow'/></c:if>
									<c:if test="${found == 'false'}"><c:set var="method" value='Follow'/></c:if>
									<th><button id="<c:out value="${user_info.username}"/>" class="btn btn-follow btn-sm pull-right" style="margin-bottom: 3px" onclick="follow(this.id, '<c:out value="${method}"/>');"><img src="../../../img/logo.png" class="logo"><c:out value="${method}"/></img></button></th>
								</c:if>
								<c:if test="${user == user_info.username}">
									<th><button onclick="edit();" class="btn btn-follow btn-sm pull-right" style="margin-bottom: 3px"></button>Edit profile</th>
								</c:if>
							</c:if>
						</tr>
					</thead>
				</table> 
			</div> <!-- .bs-example .table-responsive -->
		</wicket:panel>
	</body>
</html>

<script>
		function edit() {
			var str1 = "../../user/editprofile";
			window.location = str1;
		}
</script>
<script>
	function follow (username, method) {
		var form = document.createElement('form');
		form.setAttribute('method', 'post');
		form.setAttribute('action', method.toLowerCase());
		form.style.display = 'hidden';
		var input = document.createElement('input');
		input.setAttribute('type','text');
		input.setAttribute('name','username');
		input.setAttribute('value', username);
		input.style.display = 'hidden';
		form.appendChild(input);
		document.body.appendChild(form);
		form.submit();
	}
</script>